<!DOCTYPE html>
<html lang="ja">
<head><link rel="icon" type="image/png" href="icon.png">
<meta charset="UTF-8">
<title>ã“ã†ã«ã‚ƒã®ãƒãƒ£ãƒƒãƒˆã‚µã‚¤ãƒˆ</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

// ğŸ”¹ Firebaseè¨­å®šï¼ˆè‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const messagesRef = ref(db,"messages");

// ğŸ”¹ åå‰ã”ã¨ã®è‰²
const userColors = {};
function getColor(name){ 
  if(!userColors[name]) userColors[name] = '#' + Math.floor(Math.random()*16777215).toString(16); 
  return userColors[name]; 
}

// ğŸ”¹ éŸ³æ¥½ï¼‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
let audio = null;
const anim = document.getElementById("animation");

function playTrack(track){
  if(audio){ audio.pause(); audio.currentTime=0; }
  audio = new Audio(track);
  audio.volume = 1;
  audio.muted = false;
  audio.play().then(()=>{
    anim.style.animation="bounce 1s infinite alternate";
  }).catch(err=>{
    alert("éŸ³æ¥½ã‚’å†ç”Ÿã§ãã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚„ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
  });
}

function stopTrack(){
  if(audio){ audio.pause(); audio.currentTime=0; anim.style.animation="none"; }
}

// ğŸ”¹ ãƒãƒ£ãƒƒãƒˆé€ä¿¡
function sendMessage(){
  const name = document.getElementById("nameInput").value.trim() || "åç„¡ã—";
  const text = document.getElementById("messageInput").value.trim();
  if(text!==""){
    push(messagesRef,{name,text,time:Date.now()});
    document.getElementById("messageInput").value="";
  }
}

// ğŸ”¹ ãƒãƒ£ãƒƒãƒˆå—ä¿¡
onChildAdded(messagesRef,(snapshot)=>{
  const msg = snapshot.val();
  const div = document.getElementById("messages");
  const p = document.createElement("p");
  p.innerHTML = `<strong style="color:${getColor(msg.name)}">${msg.name}:</strong> ${msg.text}`;
  div.appendChild(p);
  div.scrollTop = div.scrollHeight;
});

// ğŸ”¹ ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
window.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("playBtn").addEventListener("click", ()=>{
    const track = document.getElementById("trackSelect").value;
    if(track) playTrack(track);
  });
  document.getElementById("stopBtn").addEventListener("click", stopTrack);
  document.getElementById("sendBtn").addEventListener("click", sendMessage);
  document.getElementById("openScratch").addEventListener("click", ()=>{
    window.open("https://scratch.mit.edu/projects/1208216134/","_blank");
  });
  document.getElementById("openScratch2").addEventListener("click", ()=>{
    window.open("https://scratch.mit.edu/projects/1205681026/","_blank");
  });
});

</script>
<style>
body{margin:0;font-family:Arial;display:flex;height:100vh;background:#121212;color:white;}
.left{flex:1;display:flex;flex-direction:column;padding:10px;}
.right{width:400px;display:flex;flex-direction:column;padding:10px;background:#1e1e1e;border-radius:10px 0 0 10px;}
button,select{padding:8px 12px;margin:3px 0;border:none;border-radius:5px;cursor:pointer;background:#4cafef;color:white;font-weight:bold;}
.animation{margin-top:10px;height:50px;border-radius:5px;background:#333;display:flex;align-items:center;justify-content:center;color:#4cafef;font-weight:bold;}
.messages{flex:1;overflow-y:auto;border-radius:5px;padding:5px;background:#222;margin-bottom:5px;}
.messages p{margin:3px 0;padding:3px 8px;border-radius:5px;word-wrap:break-word;}
.input-area{display:flex;gap:5px;}
.input-area input{flex:1;padding:5px;border-radius:5px;border:none;background:#444;color:white;}
@keyframes bounce{from{transform:scale(1);}to{transform:scale(1.2);}}
</style>
</head>
<body>

<div class="left">
  <select id="trackSelect">
    <option value="">æ›²ã‚’é¸æŠ</option>
    <option value="sound.mp3">ãƒãƒ‹ãƒ¼ãƒ‘ã‚¤</option>
    <option value="sound2.mp3">ãƒã‚¤ã‚¯ãƒ©bgm</option>
    <option value="sound3.mp3">ã—ã‚…ã‚ã—ã‚…ã‚ãƒãƒ‹ãƒ¼ãƒ¬ãƒ¢ãƒ³</option>
  </select>
  <button id="playBtn">â–¶å†ç”Ÿ</button>
  <button id="stopBtn">â¹åœæ­¢</button>
  <button id="openScratch">æˆ¦è»Šã‚²ãƒ¼ãƒ ã‚’é–‹ã</button>
  <button id="openScratch2">çŒ«ã‚²ãƒ¼ãƒ ã‚’é–‹ã</button>
  <div class="animation" id="animation">ğŸ¶ éŸ³ã«åˆã‚ã›ã¦å‹•ãã‚ˆï¼</div>
  <div class="animation" id="animation">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆï¼éŸ³æ¥½ï¼¿ãƒãƒ‹ãƒ¼ãƒ‘ã‚¤ã€ãƒ¢ã‚°ã‚·ãƒ†ã‚£ã€ã—ã‚…ã‚ã—ã‚…ã‚ãƒãƒ‹ãƒ¼ãƒ¬ãƒ¢ãƒ³ã€€ã‚²ãƒ¼ãƒ ï¼¿è‡ªä½œ</div>
</div>

<div class="right">
  <input type="text" id="nameInput" placeholder="åå‰">
  <div class="messages" id="messages"></div>
  <div class="input-area">
    <input type="text" id="messageInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...">
    <button id="sendBtn">é€ä¿¡</button>
  </div>
</div>

</body>
</html>
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚¯ãƒªãƒƒã‚¯ãƒœã‚¿ãƒ³</title>
  <script>
    let count = 0;

    window.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("countBtn");
      const display = document.getElementById("counter");

      // ğŸ”¹ ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸã¨ãã«ä¿å­˜æ¸ˆã¿ã®å€¤ã‚’èª­ã¿è¾¼ã‚€
      const savedCount = localStorage.getItem("myCount");
      if (savedCount !== null) {
        count = parseInt(savedCount, 10);
      }
      display.textContent = "ã‚«ã‚¦ãƒ³ãƒˆ: " + count;

      // ğŸ”¹ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰å¢—ã‚„ã—ã¦ä¿å­˜
      btn.addEventListener("click", () => {
        count++;
        display.textContent = "ã‚«ã‚¦ãƒ³ãƒˆ: " + count;
        localStorage.setItem("myCount", count); // â†ä¿å­˜
      });
    });
  </script>
</head>
<body>
  <p id="counter">ã‚«ã‚¦ãƒ³ãƒˆ: 0</p>
  <button id="countBtn">æŠ¼ã—ã¦ã­</button>
</body>
</html>